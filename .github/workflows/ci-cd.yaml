name: Laravel CI/CD

on:
  push:
    branches:
      - master
  pull_request:
    branches:
      - master

jobs:
  laravel-tests:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Set up PHP
        uses: shivammathur/setup-php@v2
        with:
          php-version: '8.2'
      - name: Install Dependencies
        run: composer install --prefer-dist --no-progress --no-suggest
      - name: Run Migrations
        run: php artisan migrate --seed --env=testing
        #name : install inertia files
      # - name: Run Tests
      #   run: php artisan test

  # deploy:
  #   runs-on: ubuntu-latest
  #   needs: laravel-tests
  #   steps:
  #     - uses: actions/checkout@v2
  #     - name: Deploy to hosting provider
  #       env:
  #         HEROKU_API_KEY: ${{ secrets.HEROKU_API_KEY }}
  #       run: git push heroku main
